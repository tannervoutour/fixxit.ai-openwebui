# ==============================================================================
# Fixxit.ai OpenWebUI - Production Environment Configuration
# ==============================================================================
#
# Copy this file to .env and configure with your production values
# Command: cp .env.production.template .env
#
# SECURITY: Keep this file secure! Never commit .env to version control
# ==============================================================================

# ==============================================================================
# CRITICAL: Database Password Encryption
# ==============================================================================
# This key is used to encrypt database passwords stored in group configurations
# MUST be set before configuring any Supabase database connections
#
# Generate with: python3 -c "from cryptography.fernet import Fernet; import base64; key = Fernet.generate_key(); print(base64.urlsafe_b64encode(key).decode())"
# Or run: ./setup_production.sh (will auto-generate)
#
DATABASE_PASSWORD_ENCRYPTION_KEY="REPLACE_WITH_GENERATED_KEY"

# ==============================================================================
# Server Configuration
# ==============================================================================

# Host to bind to (0.0.0.0 = all interfaces, 127.0.0.1 = localhost only)
HOST="0.0.0.0"

# Port to listen on
PORT="8080"

# Public URL of your application (used for OAuth callbacks, webhooks, etc.)
# Examples:
#   - Production: https://openwebui.yourdomain.com
#   - Development: http://localhost:8080
WEBUI_URL="http://localhost:8080"

# ==============================================================================
# Environment & Debug
# ==============================================================================

# Environment mode (production or development)
ENV="production"

# Debug mode (enable for troubleshooting, disable for production)
DEBUG_MODE="false"

# ==============================================================================
# Security Keys
# ==============================================================================

# Secret key for signing sessions (auto-generated if not provided)
# Generate with: openssl rand -base64 32
WEBUI_SECRET_KEY=""

# JWT secret (optional, defaults to WEBUI_SECRET_KEY)
WEBUI_JWT_SECRET_KEY=""

# ==============================================================================
# AI Services - OpenAI (REQUIRED for AI-enhanced logs)
# ==============================================================================

# OpenAI API Key (get from https://platform.openai.com/api-keys)
OPENAI_API_KEY=""

# OpenAI API Base URL (optional, for custom endpoints)
# OPENAI_API_BASE_URL="https://api.openai.com/v1"

# Default model for AI insights in logs
# OPENAI_API_MODEL="gpt-3.5-turbo"

# ==============================================================================
# Database Configuration
# ==============================================================================

# SQLite database file location (for OpenWebUI internal data)
# Default: backend/data/webui.db
# DATA_DIR="./data"

# ==============================================================================
# File Upload Configuration
# ==============================================================================

# Maximum file upload size in megabytes
# UPLOAD_MAX_SIZE="100"

# Allowed file types for uploads
# FILE_UPLOAD_WHITELIST=".jpg,.jpeg,.png,.gif,.pdf,.txt,.doc,.docx"

# ==============================================================================
# Authentication Configuration
# ==============================================================================

# Enable/disable signup
# ENABLE_SIGNUP="true"

# Default user role (user or admin)
# DEFAULT_USER_ROLE="user"

# Enable OAuth providers (if configured)
# ENABLE_OAUTH_SIGNUP="false"

# Session timeout in seconds (default: 7 days)
# SESSION_TIMEOUT="604800"

# ==============================================================================
# External Services - Supabase (for Logs Feature)
# ==============================================================================

# NOTE: Supabase configuration is done per-group in the admin UI
# You only need DATABASE_PASSWORD_ENCRYPTION_KEY set above
# Each group can have its own Supabase project configured

# ==============================================================================
# Performance & Scaling
# ==============================================================================

# Number of uvicorn workers (adjust based on CPU cores)
# Recommended: (2 x CPU cores) + 1
# Default: 1
# UVICORN_WORKERS="4"

# Enable compression for responses
# ENABLE_COMPRESSION="true"

# ==============================================================================
# Logging Configuration
# ==============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# LOG_LEVEL="INFO"

# Log file location
# LOG_FILE="logs/backend.log"

# ==============================================================================
# Features Configuration
# ==============================================================================

# Enable Supabase logs feature
# ENABLE_LOGS="true"

# Enable commands feature
# ENABLE_COMMANDS="true"

# ==============================================================================
# External AI Models (Optional)
# ==============================================================================

# Ollama Configuration (if using local models)
# OLLAMA_BASE_URL="http://localhost:11434"
# ENABLE_OLLAMA_API="true"

# Anthropic Claude (optional)
# ANTHROPIC_API_KEY=""

# Google AI (optional)
# GOOGLE_API_KEY=""

# ==============================================================================
# CORS Configuration
# ==============================================================================

# CORS allowed origins (comma-separated)
# For production, specify your actual domains
# CORS_ALLOW_ORIGINS="https://yourdomain.com,https://www.yourdomain.com"

# Allow all origins (NOT recommended for production!)
# CORS_ALLOW_ORIGINS="*"

# ==============================================================================
# Rate Limiting (Optional but Recommended)
# ==============================================================================

# Enable rate limiting
# ENABLE_RATE_LIMITING="true"

# Rate limit per minute per IP
# RATE_LIMIT_PER_MINUTE="60"

# ==============================================================================
# Email Configuration (Optional - for notifications)
# ==============================================================================

# SMTP server settings
# SMTP_HOST=""
# SMTP_PORT="587"
# SMTP_USER=""
# SMTP_PASSWORD=""
# SMTP_FROM="noreply@yourdomain.com"

# ==============================================================================
# Backup Configuration (Optional)
# ==============================================================================

# Automatic backup schedule
# BACKUP_ENABLED="false"
# BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
# BACKUP_DIRECTORY="/backup/openwebui"
# BACKUP_RETENTION_DAYS="7"

# ==============================================================================
# Monitoring & Health Checks
# ==============================================================================

# Enable health check endpoint
# ENABLE_HEALTH_CHECK="true"

# Health check interval for background tasks (seconds)
# HEALTH_CHECK_INTERVAL="300"

# ==============================================================================
# Advanced Configuration
# ==============================================================================

# Python path (usually auto-detected)
# PYTHONPATH="./backend"

# Timezone for logs and scheduling
# TZ="UTC"

# ==============================================================================
# Development Only (DO NOT USE IN PRODUCTION)
# ==============================================================================

# Hot reload (development only!)
# RELOAD="false"

# ==============================================================================
# Environment-Specific Overrides
# ==============================================================================
# You can create additional environment-specific files:
# - .env.production.local (for production-specific overrides, gitignored)
# - .env.development.local (for development-specific overrides, gitignored)
# ==============================================================================

# ==============================================================================
# Configuration Checklist for Production
# ==============================================================================
# Before deploying to production, ensure you have configured:
#
# [x] DATABASE_PASSWORD_ENCRYPTION_KEY - Generated unique key
# [x] WEBUI_URL - Your public domain/URL
# [x] OPENAI_API_KEY - Your OpenAI API key (for AI logs)
# [x] HOST and PORT - Server binding configuration
# [x] ENV="production" and DEBUG_MODE="false"
# [ ] WEBUI_SECRET_KEY - Custom secret key (optional, auto-generated)
# [ ] CORS_ALLOW_ORIGINS - Your actual domains (not *)
# [ ] ENABLE_SIGNUP - Set based on your needs
# [ ] UVICORN_WORKERS - Adjust based on server CPU
# [ ] Any optional services you're using
#
# ==============================================================================
