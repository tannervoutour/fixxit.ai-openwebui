# Fixxit.ai OpenWebUI - Quick Start Guide

Get your production server running in **5 simple steps**.

---

## üìã Prerequisites

Before you begin, ensure you have:

- [ ] Linux server (Ubuntu 22.04+ recommended)
- [ ] Python 3.11+
- [ ] Node.js 18+ (or 22 LTS)
- [ ] Git installed
- [ ] OpenAI API key (for AI-enhanced logs)
- [ ] Supabase project (for logs storage)

---

## üöÄ 5-Step Deployment

### Step 1: Clone Repository

```bash
git clone https://github.com/tannervoutour/fixxit.ai-openwebui.git
cd fixxit.ai-openwebui
git checkout fixxit-main
```

### Step 2: Run Automated Setup

```bash
./setup_production.sh
```

This script will:
- ‚úÖ Verify system dependencies
- ‚úÖ Set up Python virtual environment
- ‚úÖ Install all dependencies
- ‚úÖ Build production frontend
- ‚úÖ Generate encryption keys
- ‚úÖ Create .env configuration file

**Follow the prompts** - the script will guide you through configuration.

### Step 3: Configure Environment

Edit your `.env` file with required values:

```bash
nano .env
```

**Minimum required configuration:**

```bash
# CRITICAL: Keep the auto-generated key
DATABASE_PASSWORD_ENCRYPTION_KEY="<auto-generated-keep-this>"

# Set your domain or IP
WEBUI_URL="https://your-domain.com"

# Add your OpenAI API key
OPENAI_API_KEY="sk-..."

# Production settings
ENV="production"
DEBUG_MODE="false"
```

Save and exit (`Ctrl+X`, then `Y`, then `Enter`).

### Step 4: Start Server

Choose one of these methods:

**Option A: Direct Start (Simple)**
```bash
./start_server.sh start
```

**Option B: Systemd Service (Recommended for Production)**
```bash
sudo systemctl start openwebui
sudo systemctl enable openwebui  # Auto-start on boot
```

**Option C: Manual Start**
```bash
cd backend
source venv/bin/activate
./start.sh
```

### Step 5: Verify Deployment

```bash
./health_check.sh
```

Expected output: `‚úì All health checks passed!`

Access your application:
- **Local:** http://localhost:8080
- **Production:** https://your-domain.com

---

## üîê First Login

1. Navigate to your server URL
2. Click "Sign Up" to create your admin account
3. Fill in your details and submit

The **first user** becomes the administrator automatically.

---

## üìä Configure Supabase Logs

After logging in as admin:

1. Go to **Admin Panel** ‚Üí **Users** ‚Üí **Groups**
2. Create or edit a group
3. Click on **Database** tab
4. Enter your Supabase connection string:
   ```
   psql -h db.xxx.supabase.co -p 5432 -d postgres -U postgres
   ```
5. Enter your database password
6. Click **Test Connection**
7. If successful, click **Save**

Users in that group can now create and view logs in Supabase!

---

## üåê Setup Reverse Proxy (Optional but Recommended)

### Nginx Configuration

```bash
# Install Nginx
sudo apt install nginx certbot python3-certbot-nginx -y

# Create config
sudo nano /etc/nginx/sites-available/openwebui
```

Paste this configuration:

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    client_max_body_size 100M;
}
```

Enable and start:

```bash
sudo ln -s /etc/nginx/sites-available/openwebui /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

### Add SSL Certificate

```bash
sudo certbot --nginx -d your-domain.com
```

Follow the prompts to get a free SSL certificate.

---

## üîí Basic Security Setup

```bash
# Enable firewall
sudo ufw enable
sudo ufw allow 22/tcp   # SSH
sudo ufw allow 80/tcp   # HTTP
sudo ufw allow 443/tcp  # HTTPS

# Check status
sudo ufw status
```

---

## üìù Common Commands

### Server Management
```bash
# Start server
./start_server.sh start

# Stop server
./start_server.sh stop

# Restart server
./start_server.sh restart

# Check status
./start_server.sh status

# View logs
./start_server.sh logs
```

### Systemd Service
```bash
# Start service
sudo systemctl start openwebui

# Stop service
sudo systemctl stop openwebui

# Restart service
sudo systemctl restart openwebui

# Check status
sudo systemctl status openwebui

# View logs
sudo journalctl -u openwebui -f
```

### Health Checks
```bash
# Run full health check
./health_check.sh

# Silent mode (for cron jobs)
./health_check.sh --silent

# JSON output
./health_check.sh --json
```

---

## üÜò Troubleshooting

### Server Won't Start

```bash
# Check logs
tail -f logs/backend.log

# Or if using systemd
sudo journalctl -u openwebui -f

# Check if port is already in use
sudo netstat -tlnp | grep 8080
```

### Can't Connect to Server

```bash
# Verify server is running
curl http://localhost:8080/health

# Check firewall
sudo ufw status

# Check if process is running
ps aux | grep uvicorn
```

### Frontend Not Loading

```bash
# Rebuild frontend
npm run build

# Check build output
ls -la build/
```

### Database Errors

```bash
# Check encryption key is set
grep DATABASE_PASSWORD_ENCRYPTION_KEY .env

# Check database file exists
ls -la backend/data/webui.db
```

---

## üìö Next Steps

Once your server is running:

1. **Customize Settings:**
   - Go to Admin Panel ‚Üí Settings
   - Configure models, features, and integrations

2. **Set Up Supabase:**
   - Create tables for logs (see PRODUCTION_DEPLOYMENT.md)
   - Configure groups with database connections

3. **Add Users:**
   - Admin Panel ‚Üí Users ‚Üí Add User
   - Or enable signup in settings

4. **Configure Monitoring:**
   - Set up log rotation
   - Add health check cron job
   - Configure backups

5. **Secure Your Server:**
   - Change default ports if needed
   - Set up fail2ban
   - Configure CORS properly
   - Review firewall rules

---

## üìñ More Documentation

- **Full Deployment Guide:** [PRODUCTION_DEPLOYMENT.md](PRODUCTION_DEPLOYMENT.md)
- **Development Setup:** [FIXXIT_SETUP.md](FIXXIT_SETUP.md)
- **Supabase Integration:** [SUPABASE_LOGS_PROPOSAL.md](SUPABASE_LOGS_PROPOSAL.md)

---

## üÜò Getting Help

**Check these first:**
1. Run `./health_check.sh` for diagnostics
2. Review logs in `logs/` directory
3. Check systemd logs: `sudo journalctl -u openwebui -f`
4. Verify `.env` configuration

**Common Solutions:**
- **Port in use:** Change PORT in `.env`
- **Permission denied:** Check file permissions
- **Module not found:** Reinstall dependencies
- **Database locked:** Restart server

---

## ‚úÖ Deployment Checklist

Before going live:

- [ ] Server setup script completed successfully
- [ ] `.env` file configured with production values
- [ ] `DATABASE_PASSWORD_ENCRYPTION_KEY` generated and set
- [ ] `OPENAI_API_KEY` added
- [ ] `WEBUI_URL` set to your domain
- [ ] Frontend built successfully (`build/` directory exists)
- [ ] Health check passes (`./health_check.sh`)
- [ ] Server is accessible from browser
- [ ] Admin account created
- [ ] Supabase database(s) configured
- [ ] Groups configured with database connections
- [ ] SSL certificate installed (if using domain)
- [ ] Firewall configured
- [ ] Reverse proxy configured (optional)
- [ ] Backups configured (optional)

---

## üéâ You're All Set!

Your Fixxit.ai OpenWebUI server should now be running in production mode.

Visit your server and start using the AI-enhanced logs feature!

**Server URL:** http://localhost:8080 (or your domain)

**Need help?** Check the troubleshooting section or refer to [PRODUCTION_DEPLOYMENT.md](PRODUCTION_DEPLOYMENT.md) for detailed information.

---

**Deployment Date:** _______________
**Version:** 0.6.41
**Branch:** fixxit-main
